# ì†Œìœ ê¶Œì´ ë­”ê°€ìš”?

> ëŸ¬ìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ë²•ì„ ì§€ë°°í•˜ëŠ” ê·œì¹™ ëª¨ìŒ

ì†Œìœ ê¶Œ (ownership) ì´ë¼ëŠ” ì‹œìŠ¤í…œì„ ë§Œë“¤ê³ , ì»´íŒŒì¼ëŸ¬ê°€ ì»´íŒŒì¼ ì¤‘ì— ê²€ì‚¬í•  ì—¬ëŸ¬ ê·œì¹™ì„ ì •í•´ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ì‹.

ì´ ê·œì¹™ ì¤‘ í•˜ë‚˜ë¼ë„ ìœ„ë°˜í•˜ë©´ í”„ë¡œê·¸ë¨ì€ ì»´íŒŒì¼ë˜ì§€ ì•ŠëŠ”ë‹¤. ì†Œìœ ê¶Œ ê¸°ëŠ¥ë“¤ì˜ ì–´ë–¤ ê²ƒë„ ëŸ°íƒ€ì„ ë¹„ìš©ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

ì†Œìœ ê¶Œì˜ ì£¼ ëª©í‘œ: `í™ ë°ì´í„° ê´€ë¦¬`

## ì†Œìœ ê¶Œ ê·œì¹™

- ê°ê°ì˜ ê°’ì€ í•´ë‹¹ ê°’ì˜ ì˜¤ë„ˆ(owner)ê°€ ìˆë‹¤.
- í•œë²ˆì— í•˜ë‚˜ì˜ ì˜¤ë„ˆë§Œ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤.
- ì˜¤ë„ˆê°€ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚˜ë©´, ê°’ì€ ë²„ë ¤ì§„ë‹¤(dropped).

## ë³€ìˆ˜ì˜ ìŠ¤ì½”í”„

ë‚´ê°€ ì•Œê³ ìˆëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ìŠ¤ì½”í”„ì™€ ë¹„ìŠ·í•œ ë“¯ í•˜ë‹¤.

## String íƒ€ì…

ì´ íƒ€ì…ì€ í™ì— í• ë‹¹ëœ ë°ì´í„°ë¥¼ ë‹¤ë£¸ -> ì»´íŒŒì¼ íƒ€ì„ì— í¬ê¸°ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” í…ìŠ¤íŠ¸ë¥¼ ë‹¤ë£° ìˆ˜ ìˆìŒ.

`from` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ String íƒ€ì…ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```rust
let s = String::from("hello");
```

`String` ë¬¸ìì—´ì€ ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤.

```rust
let mut s = String::from("hello");
s.push_str(", world!"); // push_str() í•¨ìˆ˜ëŠ” ë¦¬í„°ëŸ´ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤.
println!("{}", s); // hello, world!
```

### `::`ì´ ë­ì§€?

`::` ë¬¸ë²•ì€ ì—°ê´€ í•¨ìˆ˜(associated function)ë¥¼ í˜¸ì¶œí•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ë¬¸ë²•ì´ë‹¤. ì—°ê´€ í•¨ìˆ˜ëŠ” íŠ¹ì • íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ ë„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤.

### Method & Associated Function

ë©”ì„œë“œëŠ” í•­ìƒ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê°€ `self`ë¼ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ê°–ëŠ”ë‹¤. `self`ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

í•˜ì§€ë§Œ, ì—°ê´€ í•¨ìˆ˜ëŠ” `self` íŒŒë¼ë¯¸í„°ë¥¼ ê°–ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹ , `::` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • êµ¬ì„± ìš”ì†Œì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì—°ê²°ëœ í•¨ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

## ë©”ëª¨ë¦¬ì™€ í• ë‹¹

ë¬¸ìì—´ ë¦¬í„°ëŸ´ì¼ ë•ŒëŠ” ì»´íŒŒì¼ íƒ€ì„ì— í¬ê¸°ë¥¼ ì•Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì»´íŒŒì¼ íƒ€ì„ì— í¬ê¸°ë¥¼ ì•Œ ìˆ˜ ìˆëŠ” ë°ì´í„°ëŠ” ìŠ¤íƒì— í• ë‹¹ëœë‹¤.

í•˜ì§€ë§Œ, `String` íƒ€ì…ì€ ì»´íŒŒì¼ íƒ€ì„ì— í¬ê¸°ë¥¼ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, í™ì— í• ë‹¹ëœë‹¤.

### í™ì— í• ë‹¹ëœ ë°ì´í„°ì˜ í•´ì œ

Rustì—ëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°(garbage collector)ê°€ ì—†ë‹¤.

GCê°€ ì—†ëŠ” ëŒ€ë¶€ë¶„ì˜ ì–¸ì–´ì—ì„œëŠ” í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ê°€ í•„ìš” ì—†ì–´ì§€ëŠ” ì§€ì ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ì°¾ì•„ ë©”ëª¨ë¦¬ í•´ì œ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ í”„ë¡œê·¸ë˜ë¨¸ê°€ ë†“ì¹  ìˆ˜ë„ ìˆê³ , ì˜ëª» ì‘ì„±í•  ìˆ˜ë„ ìˆë‹¤.

ì´ ë¬¸ì œë¥¼ RustëŠ” ë³€ìˆ˜ê°€ ìì‹ ì´ ì†Œì†ëœ ìŠ¤ì½”í”„ë¥¼ ë²—ì–´ë‚˜ëŠ” ìˆœê°„ ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°í•œë‹¤.

```rust
{
    let s = String::from("hello"); // sëŠ” ì´ ì§€ì ë¶€í„° ìœ íš¨í•˜ë‹¤.

    // së¥¼ ì´ìš©í•œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
} // ì´ ìŠ¤ì½”í”„ëŠ” ëë‚¬ê³ , sëŠ” ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•Šë‹¤. RustëŠ” ì—¬ê¸°ì„œ sì˜ ë©”ëª¨ë¦¬ë¥¼ ìë™ìœ¼ë¡œ í•´ì œí•œë‹¤.
```

ë³€ìˆ˜ê°€ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚˜ëŠ” ìˆœê°„ RustëŠ” `drop`ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ì´ í•¨ìˆ˜ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤.

C++ì—ì„œëŠ” ì´ëŸ¬í•œ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ `RAII`(Resource Acquisition Is Initialization)ë¼ê³  ë¶€ë¥¸ë‹¤.

## ë³€ìˆ˜ì™€ ë°ì´í„° ìƒí˜¸ì‘ìš©

### ì´ë™

```rust
let x = 5;
let y = x;
```

`5ë¥¼ xì— ë°”ì¸ë”©í•˜ê³ , x ê°’ì˜ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ yì— ë°”ì¸ë”©í•˜ì‹œì˜¤` ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.

ê·¸ëŸ¼ x, y ë‘ ë³€ìˆ˜ê°€ ìƒê¸°ê³  ê°ê°ì˜ ê°’ì€ 5ê°€ ë˜ë©° ìŠ¤íƒì— í‘¸ì‹œëœë‹¤.

```rust
let s1 = String::from("hello");
let s2 = s1;
```

ì´ë²ˆì—” ì „í˜€ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

![](https://rust-kr.github.io/doc.rust-kr.org/img/trpl04-01.svg)

`String` íƒ€ì…ì€ ìŠ¤íƒì— `í¬ì¸í„°`, `ê¸¸ì´`, `ìš©ëŸ‰` ì„¸ ê°œì˜ ê°’ì„ ì €ì¥í•œë‹¤.

- `ê¸¸ì´`: `String`ì˜ ë‚´ìš©ì´ í˜„ì¬ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒ
- `ìš©ëŸ‰`: ë©”ëª¨ë¦¬ í• ë‹¹ìê°€ `String`ì— í• ë‹¹í•œ ë©”ëª¨ë¦¬ ì–‘

`String` íƒ€ì…ì€ í™ì— í• ë‹¹ëœ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.

`let s2 = s1;` ì´ ì½”ë“œê°€ ì‹¤í–‰ë˜ë©´, ìŠ¤íƒì— ìˆëŠ” `s1`ì˜ ê°’ì¸ í¬ì¸í„°, ê¸¸ì´, ìš©ëŸ‰ì´ ë³µì‚¬ë˜ì–´ `s2`ì— ì €ì¥ëœë‹¤. ì´ë•Œ, `s1`ê³¼ `s2`ëŠ” ê°™ì€ í™ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆë‹¤.

ê·¸ëŸ¼ ì´ ìƒí™©ì—ì„œ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

ë§Œì•½ ê°ê° ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•œë‹¤ë©´, ì¤‘ë³µ í•´ì œ(double free) ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì´ë‹¤. ì´ëŠ” ë©”ëª¨ë¦¬ ì•ˆì •ì„± ë²„ê·¸ ì¤‘ í•˜ë‚˜ì´ë©°, ë³´ì•ˆì„ ì·¨ì•½í•˜ê²Œ ë§Œë“œëŠ” ì›ì¸ì´ ëœë‹¤.

ê·¸ë˜ì„œ RustëŠ” `let s2 = s1;` ë’¤ë¡œëŠ” `s1`ì´ ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•Šë‹¤ê³  íŒë‹¨í•œë‹¤.

```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = s1;

    println!("{}, world!", s1);
}
```

ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´, ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

```bash
error[E0382]: borrow of moved value: `s1`
 --> src/main.rs:5:28
  |
```

ë‹¤ë¥¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œëŠ” ì–•ì€ ë³µì‚¬, ê¹Šì€ ë³µì‚¬ ê°™ì€ ì¼ì´ ë°œìƒí•˜ì§€ë§Œ, Rustì—ì„œëŠ” ê¸°ì¡´ì˜ ë³€ìˆ˜ë¥¼ **ë¬´íš¨í™”** í•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì´ë™(move)ì´ë¼ í•˜ê³ , ìœ„ì˜ ì½”ë“œëŠ” `s1`ê°€ `s2`ë¡œ ì´ë™í–ˆë‹¤ê³  í‘œí˜„í•œë‹¤.

ê·¸ëŸ¼ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ì„ ë•Œ `s2`ë§Œ ìœ íš¨í•˜ë‹ˆ `s2`ë§Œ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ë©´ ëœë‹¤!

ëŸ¬ìŠ¤íŠ¸ëŠ” **ì ˆëŒ€** ìë™ìœ¼ë¡œ `ê¹Šì€` ë³µì‚¬ë¡œ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

### í´ë¡ 

`String` íƒ€ì…ì€ `clone` ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤. ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í™ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ê³ , ê·¸ ë³µì‚¬ë³¸ì„ ê°€ë¦¬í‚¤ëŠ” `String`ì„ ìƒˆë¡œ ë§Œë“ ë‹¤.

```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = s1.clone();

    println!("s1 = {}, s2 = {}", s1, s2);  // s1 = hello, s2 = hello
}
```

![](https://rust-kr.github.io/doc.rust-kr.org/img/trpl04-03.svg)

ì´ë²ˆì—” `s1`ê³¼ `s2`ê°€ ì„œë¡œ ë‹¤ë¥¸ í™ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆë‹¤.

### ë³µì‚¬

ê·¸ëŸ¼ ìŠ¤íƒì— ìˆëŠ” ë°ì´í„°ëŠ” ì–´ë–»ê²Œ ë ê¹Œ?

```rust
let x = 5;
let y = x;
```

`clone`ì„ í˜¸ì¶œí•˜ì§€ ì•Šì•˜ì§€ë§Œ, ì´ ì½”ë“œëŠ” ìŠ¤íƒì— ìˆëŠ” ë°ì´í„°ë¥¼ ë³µì‚¬í•œë‹¤.

ì •ìˆ˜í˜• ë“± ì»´íŒŒì¼ íƒ€ì„ì— í¬ê¸°ê°€ ê²°ì •ë˜ëŠ” íƒ€ì…ì€ ëª¨ë‘ ìŠ¤íƒì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ìŠ¤íƒì— ì €ì¥ë˜ë‹ˆ, ë³µì‚¬ë³¸ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ì„œ êµ³ì´ `x`ë¥¼ ë¬´íš¨í™”í•˜ì§€ ì•Šê³ ë„ `y`ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ì—¬ê¸°ì„  `clone`ì„ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

Rustì—ëŠ” `Copy` íŠ¸ë ˆì´íŠ¸ë¼ëŠ” íŠ¹ë³„í•œ ì–´ë…¸í…Œì´ì…˜ì´ ìˆë‹¤. ì´ íŠ¸ë ˆì´íŠ¸ë¥¼ êµ¬í˜„í•œ íƒ€ì…ì€ ìŠ¤íƒì— ìˆëŠ” ë°ì´í„°ë¥¼ ë³µì‚¬í•  ë•Œ `clone`ì„ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

í•˜ì§€ë§Œ êµ¬í˜„í•˜ë ¤ëŠ” íƒ€ì… ì¤‘ `Drop` íŠ¸ë ˆì´íŠ¸ë¥¼ êµ¬í˜„í•œ íƒ€ì…ì´ ìˆë‹¤ë©´, `Copy` íŠ¸ë ˆì´íŠ¸ë¥¼ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤.

ì¦‰, ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ì„ ë•Œ íŠ¹ì • ë™ì‘ì´ ìš”êµ¬ë˜ëŠ” íƒ€ì…ì— `Copy` íŠ¸ë ˆì´íŠ¸ë¥¼ ì¶”ê°€í•˜ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

`Copy` ê°€ëŠ¥í•œ íƒ€ì… ëª©ë¡ ì¤‘ ì¼ë¶€

- ëª¨ë“  ì •ìˆ˜í˜• íƒ€ì…
- `bool`
- `char`
- íŠœí”Œ (ë‹¨, ëª¨ë“  ìš”ì†Œê°€ `Copy` ê°€ëŠ¥í•´ì•¼ í•œë‹¤) (ex: `(i32, i32)` ê°€ëŠ¥, `(i32, String)` ë¶ˆê°€ëŠ¥)

## ì†Œìœ ê¶Œê³¼ í•¨ìˆ˜

ë³€ìˆ˜ì— ê°’ì„ ëŒ€ì…í•  ë•Œì™€ ìœ ì‚¬í•˜ë‹¤.

í•¨ìˆ˜ì— ë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ ëŒ€ì… ì—°ì‚°ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì´ë™(move)ì´ë‚˜ ë³µì‚¬(clone)ê°€ ë°œìƒí•œë‹¤.

```rust
fn main() {
    let s = String::from("hello");  // sê°€ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.

    takes_ownership(s);             // sì˜ ê°’ì´ í•¨ìˆ˜ ì•ˆìœ¼ë¡œ ì´ë™í–ˆë‹¤...
                                    // ... ì´ì œ ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•Šë‹¤.

    let x = 5;                      // xê°€ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.

    makes_copy(x);                  // xë„ í•¨ìˆ˜ ì•ˆìœ¼ë¡œ ì´ë™í–ˆë‹¤.
                                    // i32ëŠ” Copyê°€ ë˜ë¯€ë¡œ, ì´í›„ì—ë„ xë¥¼ ê³„ì† ì‚¬ìš©í•´ë„ ëœë‹¤.
} // ì—¬ê¸°ì„œ xê°€ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë‚˜ê°€ê³ , së„ ë‚˜ê°„ë‹¤. í•˜ì§€ë§Œ sëŠ” ì´ë¯¸ ì´ë™ë˜ì—ˆìœ¼ë¯€ë¡œ, ë³„ë‹¤ë¥¸ ì¼ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

fn takes_ownership(some_string: String) { // some_stringì´ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.
    println!("{}", some_string);
} // ì—¬ê¸°ì„œ some_stringì´ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ê³  `drop`ì´ í˜¸ì¶œëœë‹¤. ë©”ëª¨ë¦¬ëŠ” í•´ì œëœë‹¤.

fn makes_copy(some_integer: i32) { // some_integerì´ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.
    println!("{}", some_integer);
} // ì—¬ê¸°ì„œ some_integerê°€ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ë‹¤. ë³„ë‹¤ë¥¸ ì¼ì€ ì—†ë‹¤.
```

## ë°˜í™˜ê°’ê³¼ ìŠ¤ì½”í”„

í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ë„ ë³€ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì´ë™(move)ì´ë‚˜ ë³µì‚¬(clone)ê°€ ë°œìƒí•œë‹¤.

```rust
fn main() {
    let s1 = gives_ownership();         // gives_ownershipì€ ë°˜í™˜ê°’ì„ s1ì—ê²Œ ì´ë™ì‹œí‚¨ë‹¤.

    let s2 = String::from("hello");     // s2ê°€ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.

    let s3 = takes_and_gives_back(s2);  // s2ëŠ” takes_and_gives_back ì•ˆìœ¼ë¡œ ì´ë™ë˜ì—ˆê³ , ë°˜í™˜ê°’ë„ s3ìœ¼ë¡œ ì´ë™ë˜ì—ˆë‹¤.
} // ì—¬ê¸°ì„œ s3ê°€ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ê³ , dropì´ í˜¸ì¶œëœë‹¤. s2ë„ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ì§€ë§Œ, ì´ë¯¸ ì´ë™ë˜ì—ˆìœ¼ë¯€ë¡œ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

fn gives_ownership() -> String {             // gives_ownershipì€ ë°˜í™˜ê°’ì„ í˜¸ì¶œí•œ ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¨ë‹¤.
    let some_string = String::from("hello"); // some_stringì´ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.

    some_string                              // some_stringì´ ë°˜í™˜ë˜ê³ , í˜¸ì¶œí•œ ìª½ì˜ í•¨ìˆ˜ë¡œ ì´ë™ëœë‹¤.
}

// takes_and_gives_backì€ Stringì„ í•˜ë‚˜ ë°›ì•„ì„œ ë‹¤ë¥¸ í•˜ë‚˜ë¥¼ ë°˜í™˜í•œë‹¤.

fn takes_and_gives_back(a_string: String) -> String { // a_stringì´ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤.
    a_string  // a_stringì´ ë°˜í™˜ë˜ê³ , í˜¸ì¶œí•œ ìª½ì˜ í•¨ìˆ˜ë¡œ ì´ë™ëœë‹¤.
}
```

## ì°¸ì¡°ì™€ ëŒ€ì—¬

í•¨ìˆ˜ í˜¸ì¶œ ì´í›„ì—ë„ ë³€ìˆ˜ë¥¼ ê³„ì† ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?

ì´ë•Œ ì°¸ì¡°(reference)ë¥¼ ì‚¬ìš©í•œë‹¤.

Cì—ì„œ í¬ì¸í„°ì™€ ìœ ì‚¬í•˜ë‹¤. `&`ë¥¼ ì‚¬ìš©í•´ì„œ ì°¸ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```rust
fn main() {
    let s1 = String::from("hello");

    let len = calculate_length(&s1);

    println!("The length of '{}' is {}.", s1, len);
}

fn calculate_length(s: &String) -> usize { // sëŠ” Stringì— ëŒ€í•œ ì°¸ì¡°ë‹¤.
    s.len()
} // ì—¬ê¸°ì„œ sëŠ” ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ë‹¤. í•˜ì§€ë§Œ ì°¸ì¡°ëŠ” ê°’ì´ ì•„ë‹ˆë¯€ë¡œ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
```

![](https://rust-kr.github.io/doc.rust-kr.org/img/trpl04-05.svg)

> ì°¸ì¡°ì˜ ë°˜ëŒ€ëŠ” ì—­ì°¸ì¡°(dereferencing)ì´ë‹¤. `*`ë¥¼ ì‚¬ìš©í•œë‹¤.

ìŠ¤ì½”í”„ê°€ ëë‚˜ë„ í•´ë‹¹ ë³€ìˆ˜ì— ì†Œìœ ê¶Œì´ ì—†ì–´ì„œ ë²„ë ¤ì§€ì§€ ì•ŠëŠ”ë‹¤. ì°¸ì¡°ìë¥¼ ë§Œë“œëŠ” í–‰ìœ„ë¥¼ ëŒ€ì—¬(borrow)ë¼ê³  í•œë‹¤.

ë³€ìˆ˜ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ë¶ˆë³€ì„±ì„ ì§€ë‹ˆë“¯, ì°¸ì¡°ìëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¶ˆë³€ì´ë‹¤. ì°¸ì¡°ìë¥¼ ê°€ì§€ê³  ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.

## ê°€ë³€ ì°¸ì¡°ì

ì°¸ì¡°ìë¥¼ ê°€ë³€ ì°¸ì¡°ìë¡œ ë§Œë“¤ë©´ ì°¸ì¡°ìê°€ ê°€ë¦¬í‚¤ëŠ” ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```rust
fn main() {
    let mut s = String::from("hello");

    change(&mut s);
}

fn change(some_string: &mut String) {
    some_string.push_str(", world");
}
```

ë‹¤ë§Œ, ì–´ë–¤ ê°’ì— ëŒ€í•œ ê°€ë³€ ì°¸ì¡°ìê°€ ìˆìœ¼ë©´, ê·¸ ê°’ì— ëŒ€í•œ ì°¸ì¡°ìëŠ” ì—¬ëŸ¬ ê°œ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.

ì´ëŸ° ì œì•½ì€ ê°’ì˜ ë³€ê²½ì— ëŒ€í•œ ì œì–´ê°€ ì›í™œí•˜ë„ë¡ í•´ì¤€ë‹¤. ì´ ë•ë¶„ì— Rustì—ì„œëŠ” ì»´íŒŒì¼ íƒ€ì„ì— `ë°ì´í„° ê²½í•©(data race)`ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

> `ë°ì´í„° ê²½í•©` : ë‘ ê°œ ì´ìƒì˜ í¬ì¸í„°ê°€ ê°™ì€ ë°ì´í„°ì— ì ‘ê·¼í•˜ê³ , ê·¸ ì¤‘ ì ì–´ë„ í•˜ë‚˜ì˜ í¬ì¸í„°ê°€ ë°ì´í„°ë¥¼ ì“°ëŠ” ê²½ìš°ë¥¼ ë§í•œë‹¤.

Rustì—ì„œëŠ” ë°ì´í„° ê²½í•©ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë©´ ì»´íŒŒì¼ì„ ê±°ë¶€í•œë‹¤! ğŸ‘

ì¤‘ê´„í˜¸ë¡œ ìƒˆë¡œìš´ ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ì–´ ê°€ë³€ ì°¸ì¡°ìë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“¤ë©´ì„œ ë™ì‹œì— ì¡´ì¬í•˜ëŠ” ìƒí™©ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```rust
let mut s = String::from("hello");

{
    let r1 = &mut s;

} // r1ì€ ì—¬ê¸°ì„œ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ìœ¼ë¯€ë¡œ, ì´ì œ ë” ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

let r2 = &mut s;
```

ê°€ë³€ ì°¸ì¡°ìì™€ ë¶ˆë³€ ì°¸ì¡°ìë¥¼ ë™ì‹œì— ê°€ì§ˆ ìˆ˜ë„ ì—†ë‹¤.

ë¶ˆë³€ ì°¸ì¡°ìë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œëŠ” ì‚¬ìš© ì¤‘ì— ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ì¥ë°›ëŠ”ë‹¤.

ë¶ˆë³€ ì°¸ì¡°ìëŠ” ì½ëŠ” ê²ƒë§Œ ê°€ëŠ¥í•˜ë‹¤. ê·¸ë˜ì„œ ì—¬ëŸ¬ ê°œì˜ ë¶ˆë³€ ì°¸ì¡°ìë¥¼ ë§Œë“¤ì–´ë„ ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.

í•´ë‹¹ ì°¸ì¡°ìê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ì ë¶€ë¶„ê¹Œì§€ ì°¸ì¡°ìê°€ ìœ íš¨í•˜ê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

```rust
let mut s = String::from("hello");

let r1 = &s; // ë¬¸ì œì—†ìŒ
let r2 = &s; // ë¬¸ì œì—†ìŒ
println!("{} and {}", r1, r2);
// r1ê³¼ r2ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

let r3 = &mut s; // ë¬¸ì œì—†ìŒ
println!("{}", r3);
```

## ëŒ•ê¸€ë§ ì°¸ì¡°

ëŒ•ê¸€ë§ ì°¸ì¡°(dangling reference)ëŠ” ì°¸ì¡°ìê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê²ƒì„ ë§í•œë‹¤.

```rust
fn dangle() -> &String { // dangleì€ Stringì— ëŒ€í•œ ì°¸ì¡°ìë¥¼ ë°˜í™˜í•œë‹¤.
    let s = String::from("hello"); // sëŠ” ìƒˆë¡œìš´ Stringì´ë‹¤.

    &s // String sì˜ ì°¸ì¡°ìë¥¼ ë°˜í™˜í•œë‹¤.
} // ì—¬ê¸°ì„œ sëŠ” ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¬ê³ , ë©”ëª¨ë¦¬ëŠ” í•´ì œë˜ì—ˆì§€ë§Œ, ì°¸ì¡°ìëŠ” ì—¬ì „íˆ ë°˜í™˜ê°’ì„ ê°€ë¦¬í‚¤ê³  ìˆë‹¤. ë¬¸ì œ ë°œìƒ!
```

ì´ ê²½ìš°ì—” ì§ì ‘ ë°˜í™˜í•´ì•¼ í•œë‹¤.

## ìŠ¬ë¼ì´ìŠ¤

ìŠ¬ë¼ì´ìŠ¤(slice)ëŠ” ì»¬ë ‰ì…˜ ì „ì²´ê°€ ì•„ë‹Œ ì»¬ë ‰ì…˜ì˜ ì—°ì†ëœ ì¼ë ¨ì˜ ìš”ì†Œë“¤ì„ ì°¸ì¡°í•˜ëŠ” ì°¸ì¡°ìë‹¤.

ìŠ¬ë¼ì´ìŠ¤ëŠ” ì°¸ì¡°ìì˜ ì¼ì¢…ìœ¼ë¡œì„œ ì†Œìœ ê¶Œì„ ê°€ì§€ì§€ ì•ŠëŠ”ë‹¤.

```rust
let s = String::from("hello world");

let hello = &s[0..5];
let world = &s[6..11];

println!("{} {}", hello, world); // hello world
```

`clear` í•¨ìˆ˜ëŠ” `String`ì˜ ê¸¸ì´ë¥¼ ë³€ê²½í•´ì•¼ í•˜ë‹ˆ ê°€ë³€ ì°¸ì¡°ìê°€ í•„ìš”í•˜ë‹¤.
`println!`ì€ `String`ì˜ ê¸¸ì´ë¥¼ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë‹ˆ ë¶ˆë³€ ì°¸ì¡°ìê°€ í•„ìš”í•˜ë‹¤.

ê·¸ ì§€ì ê¹Œì§€ ë¶ˆë³€ ì°¸ì¡°ìëŠ” ê³„ì† í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.

```rust
fn main() {
  let mut s = String::from("hello world");

  let word = first_word(&s); // wordì˜ íƒ€ì…ì€ &strì´ë‹¤.

  s.clear(); // Stringì„ ë¹„ìš´ë‹¤.

  println!("the first word is: {}", word); // wordëŠ” ì—¬ê¸°ì„œ ìœ íš¨í•˜ì§€ ì•Šë‹¤! ì—ëŸ¬ ë°œìƒ!
}

fn first_word(s: &String) -> &str { // &Stringì„ ë°›ì•„ì„œ &strì„ ë°˜í™˜í•œë‹¤.
  let bytes = s.as_bytes(); // ë°”ì´íŠ¸ë¡œ ë³€í™˜í•œë‹¤.

  for (i, &item) in bytes.iter().enumerate() { // iter() ë©”ì„œë“œëŠ” ì»¬ë ‰ì…˜ì˜ ê° ìš”ì†Œë¥¼ ë°˜ë³µí•œë‹¤.
    if item == b' ' { // ê³µë°±ì„ ì°¾ëŠ”ë‹¤.
      return &s[0..i]; // ê³µë°±ì„ ì°¾ìœ¼ë©´ &s[0..i]ë¥¼ ë°˜í™˜í•œë‹¤.
    }
  }

  &s[..] // ê³µë°±ì´ ì—†ìœ¼ë©´ &s[..]ë¥¼ ë°˜í™˜í•œë‹¤.
}
```
